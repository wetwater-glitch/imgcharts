<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bar Chart Maker - imgcharts.com</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/x-icon" href="/shared/img/gblimgtabicon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet" />
</head>

<body>
  <div id="header"></div>
  <script>
    fetch('/html/header.html')
      .then(res => res.text())
      .then(data => (document.getElementById('header').innerHTML = data))
      .catch(err => console.error('Error loading header:', err));
  </script>

  <main class="main--maker--page">
    <div class="global--chart--editor">
      <h3>Chart Editor</h3>

      <div class="chart-type-selector">
        <label>
          Chart Type:
          <select class="chart-type-input">
            <option value="single">Single Bar Chart</option>
            <option value="grouped">Grouped Bar Chart</option>
          </select>
        </label>
        <label>
          Orientation:
          <select class="chart-orientation-input">
            <option value="vertical">Vertical</option>
            <option value="horizontal">Horizontal</option>
          </select>
        </label>
        <label class="stack-type-selector" style="display: none;">
          Bar Style:
          <select class="stack-type-input">
            <option value="regular">Regular</option>
            <option value="stacked">Stacked</option>
          </select>
        </label>
      </div>

      <div class="single-bar-settings">
        <label>
          Chart Title:
          <input type="text" class="chart-title-input" placeholder="Enter chart title" />
        </label>

        <label>
          X-Axis Label:
          <input type="text" class="x-axis-label-input" placeholder="e.g., Categories" />
        </label>

        <label>
          Y-Axis Label:
          <input type="text" class="y-axis-label-input" placeholder="e.g., Values" />
        </label>

        <label>
          Bar Color:
          <input type="color" class="bar-color-input" value="#007bff" />
        </label>

        <label class="bar-width-label">
          Bar Width (%):
          <input type="range" class="bar-width-input" min="10" max="100" value="30" />
          <span class="bar-width-value">30%</span>
        </label>

        <div class="data-inputs">
          <h4>Data Points</h4>
          <div class="single-bar-warning" style="display: none;">
            Add more data points for a more meaningful chart.
          </div>
          <div class="data-point">
            <input type="text" class="data-label" placeholder="Label" />
            <input type="number" class="data-value" min="0" placeholder="Value" />
            <button class="remove-data-point">Remove</button>
          </div>
          <button class="add-data-point">Add Data Point</button>
        </div>

        <button class="toggle-advanced-settings">Show Advanced Settings</button>
        <div class="advanced-settings" style="display: none;">
          <h4>Advanced Settings</h4>
          <div class="advanced-settings-note">
            Charts are responsive by default. Set custom dimensions for precise control (e.g., for export).
          </div>
          <label>
            Background Color:
            <input type="color" class="background-color-input" value="#ffffff" />
          </label>
          <label>
            Text Color:
            <input type="color" class="text-color-input" value="#000000" />
          </label>
          <label>
            Chart Width (px):
            <input type="number" class="chart-width-input" min="400" max="2000" value="800" />
          </label>
          <label>
            Chart Height (px):
            <input type="number" class="chart-height-input" min="300" max="2000" value="400" />
          </label>
          <div class="bar-numbers-toggle-container">
            <label>
              <input type="checkbox" id="show-bar-numbers-single" name="show-bar-numbers-single">
              Show Numbers Inside Bars
            </label>
          </div>
          <div class="bar-numbers-color-container">
            <label>
              Bar Numbers Color
              <input type="color" id="bar-numbers-color-single" name="bar-numbers-color-single" value="#000000">
            </label>
          </div>
        </div>
      </div>

      <div class="grouped-bar-settings" style="display: none;">
        <label>
          Chart Title:
          <input type="text" class="chart-title-input" placeholder="Enter chart title" />
        </label>

        <label>
          X-Axis Label:
          <input type="text" class="x-axis-label-input" placeholder="e.g., Categories" />
        </label>

        <label>
          Y-Axis Label:
          <input type="text" class="y-axis-label-input" placeholder="e.g., Values" />
        </label>

        <div class="group-inputs">
          <h4>Groups</h4>
          <div class="group-point">
            <input type="text" class="group-label" placeholder="Group Label" />
            <input type="color" class="group-color" value="#007bff" />
            <button class="remove-group-point">Remove</button>
          </div>
          <div class="group-point">
            <input type="text" class="group-label" placeholder="Group Label" />
            <input type="color" class="group-color" value="#ff4d4d" />
            <button class="remove-group-point">Remove</button>
          </div>
          <button class="add-group-point">Add Group</button>
        </div>

        <div class="data-inputs">
          <h4>Data Points</h4>
          <div class="data-point">
            <input type="text" class="data-label" placeholder="Label" />
            <div class="group-values">
              <input type="number" class="data-value" min="0" placeholder="Value for Group 1" />
              <input type="number" class="data-value" min="0" placeholder="Value for Group 2" />
            </div>
            <button class="remove-data-point">Remove</button>
          </div>
          <button class="add-data-point">Add Data Point</button>
        </div>

        <button class="toggle-advanced-settings">Show Advanced Settings</button>
        <div class="advanced-settings" style="display: none;">
          <h4>Advanced Settings</h4>
          <div class="advanced-settings-note">
            Charts are responsive by default. Set custom dimensions for precise control (e.g., for export).
          </div>
          <label>
            Background Color:
            <input type="color" class="background-color-input" value="#ffffff" />
          </label>
          <label>
            Text Color:
            <input type="color" class="text-color-input" value="#000000" />
          </label>
          <label>
            Chart Width (px):
            <input type="number" class="chart-width-input" min="400" max="2000" value="800" />
          </label>
          <label>
            Chart Height (px):
            <input type="number" class="chart-height-input" min="300" max="2000" value="400" />
          </label>
          <div class="bar-numbers-toggle-container">
            <label>
              <input type="checkbox" id="show-bar-numbers-grouped" name="show-bar-numbers-grouped">
              Show Numbers Inside Bars
            </label>
          </div>
          <div class="bar-numbers-color-container">
            <label>
              Bar Numbers Color
              <input type="color" id="bar-numbers-color-grouped" name="bar-numbers-color-grouped" value="#000000">
            </label>
          </div>
        </div>
      </div>

      <button class="chart-submit-button">Update Chart</button>
    </div>

    <div class="chart--interaction--section">
      <div class="global--chart--view">
        <canvas id="barChart"></canvas>
      </div>

      <div class="chart--action--buttons">
        <div class="global--chart--button--download button-extract">
          Download as PNG
          <img src="/shared/img/gblimgdownload.png" height="15" />
        </div>

        <div class="global--chart--button--copy button-extract">
          Copy to Clipboard
          <img src="/shared/img/gblimgcopy.png" height="18" />
        </div>
      </div>
    </div>
  </main>

  <div id="footer"></div>
  <script>
    fetch('/html/footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer').innerHTML = data;
      })
      .catch(error => console.error('Error loading footer:', error));
  </script>

  <div class="notification" id="copyNotification">Copied to clipboard!</div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    let chartInstance = null;
    let currentBgColor = '#ffffff';
    let canShowNotification = false;

    // Register the DataLabels plugin
    Chart.register(ChartDataLabels);

    (function() {
      const notification = document.getElementById('copyNotification');
      if (notification) {
        notification.classList.remove('show');
        notification.style.display = 'none';
        console.log('Notification hidden on script initialization');
      }
    })();

    const backgroundColorPlugin = {
      id: 'customCanvasBackground',
      beforeDraw: (chart) => {
        const ctx = chart.ctx;
        ctx.save();
        ctx.fillStyle = currentBgColor;
        ctx.fillRect(0, 0, chart.width, chart.height);
        ctx.restore();
      }
    };

    function updateChartDimensions(width, height) {
      const chartView = document.querySelector('.global--chart--view');
      const canvas = document.getElementById('barChart');
      
      chartView.style.width = `${width}px`;
      chartView.style.height = `${height}px`;
      chartView.style.minHeight = `${height}px`;
      canvas.style.width = `${width}px`;
      canvas.style.height = `${height}px`;
      canvas.width = width;
      canvas.height = height;
      
      if (chartInstance) {
        chartInstance.resize();
      }
    }

    function initializeChart() {
      const ctx = document.getElementById('barChart').getContext('2d');
      if (!ctx) {
        console.error('Canvas context not found for barChart');
        return;
      }
      
      const initialWidth = parseInt(document.querySelector('.chart-width-input').value) || 800;
      const initialHeight = parseInt(document.querySelector('.chart-height-input').value) || 400;
      updateChartDimensions(initialWidth, initialHeight);
      
      chartInstance = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['A', 'B', 'C', 'D'],
          datasets: [{
            label: '',
            data: [60, 80, 40, 90],
            backgroundColor: '#007bff',
            borderRadius: 5,
            barPercentage: 0.3,
            categoryPercentage: 0.6
          }]
        },
        options: {
          indexAxis: 'x',
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: 'Chart Title',
              font: { size: 18, family: 'Poppins', weight: 500, style: 'normal' },
              color: '#000000'
            },
            legend: {
              display: false,
              position: 'top',
              labels: {
                font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' },
                color: '#000000'
              }
            },
            datalabels: {
              display: false,
              color: '#000000',
              anchor: 'center',
              align: 'center',
              font: {
                size: 12,
                family: 'Poppins',
                weight: 500
              },
              formatter: (value) => value
            }
          },
          scales: {
            x: {
              title: {
                display: true,
                text: 'Categories',
                font: { size: 14, family: 'Poppins', weight: 500, style: 'normal' },
                color: '#000000'
              },
              ticks: {
                color: '#000000',
                font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' }
              },
              grid: { display: false }
            },
            y: {
              title: {
                display: true,
                text: 'Values',
                font: { size: 14, family: 'Poppins', weight: 500, style: 'normal' },
                color: '#000000'
              },
              ticks: {
                color: '#000000',
                font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' }
              },
              beginAtZero: true,
              grid: { color: '#e0e0e0' }
            }
          }
        },
        plugins: [backgroundColorPlugin, ChartDataLabels]
      });
    }

    function updateGroupValues() {
      const groupInputs = document.querySelectorAll('.group-point');
      const dataPoints = document.querySelectorAll('.grouped-bar-settings .data-point');
      const groupCount = groupInputs.length;

      dataPoints.forEach(dataPoint => {
        const groupValuesContainer = dataPoint.querySelector('.group-values');
        const currentValues = Array.from(dataPoint.querySelectorAll('.data-value')).map(input => input.value);
        groupValuesContainer.innerHTML = '';
        groupInputs.forEach((group, index) => {
          const valueInput = document.createElement('input');
          valueInput.type = 'number';
          valueInput.className = 'data-value';
          valueInput.min = '0';
          valueInput.placeholder = `Value for Group ${index + 1}`;
          valueInput.value = currentValues[index] || '';
          groupValuesContainer.appendChild(valueInput);
        });
      });
    }

    function updateSingleBarWarning() {
      const dataPoints = document.querySelectorAll('.single-bar-settings .data-point');
      const warning = document.querySelector('.single-bar-warning');
      if (dataPoints.length === 1) {
        warning.style.display = 'block';
      } else {
        warning.style.display = 'none';
      }
    }

    document.querySelectorAll('.bar-width-input').forEach(input => {
      input.addEventListener('input', function() {
        const valueDisplay = this.nextElementSibling;
        if (valueDisplay && valueDisplay.classList.contains('bar-width-value')) {
          valueDisplay.textContent = `${this.value}%`;
        }
      });
    });

    document.querySelectorAll('.toggle-advanced-settings').forEach(button => {
      button.addEventListener('click', () => {
        const advancedSettings = button.nextElementSibling;
        const isVisible = advancedSettings.style.display === 'block';
        advancedSettings.style.display = isVisible ? 'none' : 'block';
        button.textContent = isVisible ? 'Show Advanced Settings' : 'Hide Advanced Settings';
      });
    });

    document.querySelector('.chart-type-input').addEventListener('change', (e) => {
      const singleSettings = document.querySelector('.single-bar-settings');
      const groupedSettings = document.querySelector('.grouped-bar-settings');
      const barWidthLabel = document.querySelector('.bar-width-label');
      const stackTypeSelector = document.querySelector('.stack-type-selector');
      if (e.target.value === 'single') {
        singleSettings.style.display = 'block';
        groupedSettings.style.display = 'none';
        stackTypeSelector.style.display = 'none';
        if (barWidthLabel) barWidthLabel.style.display = 'block';
        updateSingleBarWarning();
      } else {
        singleSettings.style.display = 'none';
        groupedSettings.style.display = 'block';
        stackTypeSelector.style.display = 'block';
        if (barWidthLabel) barWidthLabel.style.display = 'none';
        updateGroupValues();
      }
    });

    document.querySelectorAll('.add-data-point').forEach(button => {
      button.addEventListener('click', (e) => {
        const dataInputs = button.parentElement;
        const newDataPoint = document.createElement('div');
        newDataPoint.className = 'data-point';
        if (button.closest('.grouped-bar-settings')) {
          const groupInputs = document.querySelectorAll('.group-point');
          newDataPoint.innerHTML = `
            <input type="text" class="data-label" placeholder="Label" />
            <div class="group-values">
              ${Array.from(groupInputs).map((_, index) => `
                <input type="number" class="data-value" min="0" placeholder="Value for Group ${index + 1}" />
              `).join('')}
            </div>
            <button class="remove-data-point">Remove</button>
          `;
        } else {
          newDataPoint.innerHTML = `
            <input type="text" class="data-label" placeholder="Label" />
            <input type="number" class="data-value" min="0" placeholder="Value" />
            <button class="remove-data-point">Remove</button>
          `;
        }
        dataInputs.insertBefore(newDataPoint, button);
        if (button.closest('.single-bar-settings')) {
          updateSingleBarWarning();
        }
      });
    });

    document.querySelector('.add-group-point').addEventListener('click', () => {
      const groupInputs = document.querySelector('.group-inputs');
      const newGroupPoint = document.createElement('div');
      newGroupPoint.className = 'group-point';
      newGroupPoint.innerHTML = `
        <input type="text" class="group-label" placeholder="Group Label" />
        <input type="color" class="group-color" value="#${Math.floor(Math.random()*16777215).toString(16)}" />
        <button class="remove-group-point">Remove</button>
      `;
      groupInputs.insertBefore(newGroupPoint, document.querySelector('.add-group-point'));
      updateGroupValues();
    });

    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('remove-data-point')) {
        if (e.target.closest('.data-inputs').querySelectorAll('.data-point').length > 1) {
          e.target.parentElement.remove();
          if (e.target.closest('.single-bar-settings')) {
            updateSingleBarWarning();
          }
        }
      }
      if (e.target.classList.contains('remove-group-point')) {
        if (document.querySelectorAll('.group-point').length > 1) {
          e.target.parentElement.remove();
          updateGroupValues();
        }
      }
    });

    document.querySelector('.chart-submit-button').addEventListener('click', () => {
      try {
        const chartType = document.querySelector('.chart-type-input').value;
        const title = document.querySelector(`.${chartType}-bar-settings .chart-title-input`).value || 'Chart Title';
        const xAxis = document.querySelector(`.${chartType}-bar-settings .x-axis-label-input`).value || 'Categories';
        const yAxis = document.querySelector(`.${chartType}-bar-settings .y-axis-label-input`).value || 'Values';
        const bgColor = document.querySelector(`.${chartType}-bar-settings .background-color-input`).value || '#ffffff';
        const textColor = document.querySelector(`.${chartType}-bar-settings .text-color-input`).value || '#000000';
        const barWidth = parseFloat(document.querySelector(`.${chartType}-bar-settings .bar-width-input`)?.value || 30) / 100 || 0.3;
        const chartWidth = parseInt(document.querySelector(`.${chartType}-bar-settings .chart-width-input`).value) || 800;
        const chartHeight = parseInt(document.querySelector(`.${chartType}-bar-settings .chart-height-input`).value) || 400;
        const orientation = document.querySelector('.chart-orientation-input').value || 'vertical';
        const stackType = chartType === 'grouped' ? document.querySelector('.stack-type-input').value : 'regular';
        const showBarNumbers = document.querySelector(`#show-bar-numbers-${chartType}`).checked;
        const barNumbersColor = document.querySelector(`#bar-numbers-color-${chartType}`).value || '#000000';

        currentBgColor = bgColor;
        
        updateChartDimensions(chartWidth, chartHeight);

        if (chartInstance) {
          chartInstance.destroy();
        }

        const ctx = document.getElementById('barChart').getContext('2d');
        let dataConfig;

        if (chartType === 'single') {
          const labels = Array.from(document.querySelectorAll('.single-bar-settings .data-label')).map(input => input.value || 'Label');
          const values = Array.from(document.querySelectorAll('.single-bar-settings .data-value')).map(input => parseFloat(input.value) || 0);
          const barColor = document.querySelector('.single-bar-settings .bar-color-input').value || '#007bff';

          dataConfig = {
            labels: labels,
            datasets: [{
              label: '',
              data: values,
              backgroundColor: barColor,
              borderRadius: 5,
              barPercentage: barWidth,
              categoryPercentage: 0.6
            }]
          };
        } else {
          const labels = Array.from(document.querySelectorAll('.grouped-bar-settings .data-label')).map(input => input.value || 'Label');
          const groupInputs = document.querySelectorAll('.group-point');
          const datasets = Array.from(groupInputs).map((group, index) => {
            const groupLabel = group.querySelector('.group-label').value || `Group ${index + 1}`;
            const groupColor = group.querySelector('.group-color').value;
            const values = Array.from(document.querySelectorAll('.grouped-bar-settings .data-point')).map(dataPoint => {
              const valueInputs = dataPoint.querySelectorAll('.data-value');
              return parseFloat(valueInputs[index].value) || 0;
            });
            return {
              label: groupLabel,
              data: values,
              backgroundColor: groupColor,
              borderRadius: 5,
              barPercentage: 1.0,
              categoryPercentage: 0.6
            };
          });

          dataConfig = {
            labels: labels,
            datasets: datasets
          };
        }

        chartInstance = new Chart(ctx, {
          type: 'bar',
          data: dataConfig,
          options: {
            indexAxis: orientation === 'horizontal' ? 'y' : 'x',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              title: {
                display: true,
                text: title,
                font: { size: 18, family: 'Poppins', weight: 500, style: 'normal' },
                color: textColor
              },
              legend: {
                display: chartType === 'grouped' ? true : false,
                position: 'top',
                labels: {
                  font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' },
                  color: textColor
                }
              },
              datalabels: {
                display: showBarNumbers,
                color: barNumbersColor,
                anchor: 'center',
                align: 'center',
                font: {
                  size: 12,
                  family: 'Poppins',
                  weight: 500
                },
                formatter: (value) => value
              }
            },
            scales: {
              [orientation === 'horizontal' ? 'y' : 'x']: {
                title: {
                  display: true,
                  text: xAxis,
                  font: { size: 14, family: 'Poppins', weight: 500, style: 'normal' },
                  color: textColor
                },
                ticks: {
                  color: textColor,
                  font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' }
                },
                grid: {
                  display: orientation === 'horizontal' ? true : false,
                  color: orientation === 'horizontal' ? '#e0e0e0' : undefined
                },
                stacked: chartType === 'grouped' && stackType === 'stacked'
              },
              [orientation === 'horizontal' ? 'x' : 'y']: {
                title: {
                  display: true,
                  text: yAxis,
                  font: { size: 14, family: 'Poppins', weight: 500, style: 'normal' },
                  color: textColor
                },
                ticks: {
                  color: textColor,
                  font: { size: 12, family: 'Poppins', weight: 500, style: 'normal' }
                },
                beginAtZero: true,
                grid: {
                  display: orientation === 'vertical' ? true : false,
                  color: orientation === 'vertical' ? '#e0e0e0' : undefined
                },
                stacked: chartType === 'grouped' && stackType === 'stacked'
              }
            }
          },
          plugins: [backgroundColorPlugin, ChartDataLabels]
        });

        chartInstance.resize();
        document.querySelector('.global--chart--view').classList.add('fade');
        setTimeout(() => document.querySelector('.global--chart--view').classList.remove('fade'), 400);
      } catch (error) {
        console.error('Error updating chart:', error);
      }
    });

    document.querySelector('.global--chart--button--download').addEventListener('click', () => {
      try {
        const chartView = document.querySelector('.global--chart--view');
        const canvasElement = document.getElementById('barChart');
        const chartWidth = parseInt(chartView.style.width) || 800;
        const chartHeight = parseInt(chartView.style.height) || 400;

        const tempCanvas = document.createElement('canvas');
        tempCanvas.width = chartWidth;
        tempCanvas.height = chartHeight;
        const tempCtx = tempCanvas.getContext('2d');

        tempCtx.fillStyle = currentBgColor;
        tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
        tempCtx.drawImage(canvasElement, 0, 0, chartWidth, chartHeight);

        const link = document.createElement('a');
        link.download = 'chart.png';
        link.href = tempCanvas.toDataURL('image/png');
        link.click();
      } catch (error) {
        console.error('Error downloading chart:', error);
      }
    });

    document.querySelector('.global--chart--button--copy').addEventListener('click', () => {
      try {
        const chartView = document.querySelector('.global--chart--view');
        const canvasElement = document.getElementById('barChart');
        const notification = document.getElementById('copyNotification');
        const chartWidth = parseInt(chartView.style.width) || 800;
        const chartHeight = parseInt(chartView.style.height) || 400;

        canShowNotification = true;
        console.log('Copy button clicked, enabling notification');

        notification.classList.remove('show');
        notification.style.display = 'block';

        const tempCanvas = document.createElement('canvas');
        tempCanvas.width = chartWidth;
        tempCanvas.height = chartHeight;
        const tempCtx = tempCanvas.getContext('2d');

        tempCtx.fillStyle = currentBgColor;
        tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
        tempCtx.drawImage(canvasElement, 0, 0, chartWidth, chartHeight);

        tempCanvas.toBlob(blob => {
          const item = new ClipboardItem({ 'image/png': blob });
          navigator.clipboard.write([item]).then(() => {
            if (canShowNotification) {
              console.log('Showing notification after successful clipboard write');
              notification.classList.add('show');
              setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                  notification.style.display = 'none';
                  console.log('Notification hidden after timeout');
                }, 300);
              }, 2000);
            }
          }).catch(err => {
            console.error('Error copying to clipboard:', err);
          });
        });
      } catch (error) {
        console.error('Error copying chart:', error);
      }
    });

    document.addEventListener('DOMContentLoaded', () => {
      try {
        const notification = document.getElementById('copyNotification');
        notification.classList.remove('show');
        notification.style.display = 'none';
        canShowNotification = false;
        console.log('DOMContentLoaded: Notification hidden and disabled');

        initializeChart();
        document.querySelectorAll('.bar-width-input').forEach(input => {
          const valueDisplay = input.nextElementSibling;
          if (valueDisplay && valueDisplay.classList.contains('bar-width-value')) {
            valueDisplay.textContent = `${input.value}%`;
          }
        });
        updateSingleBarWarning();
      } catch (error) {
        console.error('Error initializing chart:', error);
      }
    });

    document.addEventListener('click', (e) => {
      if (e.target !== document.querySelector('.global--chart--button--copy')) {
        console.log('Click detected outside copy button:', e.target);
      }
    });
  </script>
</body>
</html>